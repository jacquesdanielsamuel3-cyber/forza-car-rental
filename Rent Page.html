<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rent Page</title>
  <link rel="stylesheet" href="Theme + Simple Design.css" />
  <a href="javascript:history.back()" class="back-button">â¤º Return Back</a>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="car-display.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

</head>
<body>
  <header class="main-header">
    <h1 class="animated-title">Rent Your Car</h1>
    <nav class="navbar">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="Booking Form + Price Calculator.html">Book</a></li>
        <li><a href="About Us.html">About</a></li>
        <li><a href="Contact Us.html">Contact</a></li>
        <li><a href="Location.html">Location</a></li>
      </ul>
    </nav>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Exo:wght@400;600&display=swap" rel="stylesheet">
  </header>

<h2 id="selected-car-name">Car Name</h2>
<div class="car-select">
  <img id="car-select-img" src="" alt="Selected Car" />
</div>

<!-- Car specs & description -->
<div class="car-details" id="car-details">
</div>

<section class="user-details"> 
  <h3>Enter Your Details</h3>
<form id="rentForm">
  <input type="text" id="fullName" placeholder="Full Name" required />
  <input type="email" id="email" placeholder="Email" required />
  <input type="tel" id="mobile" placeholder="Mobile Number" required />
  <label for="days">Number of Days:</label>
  <input type="number" id="days" min="1" max="5" value="1" required />
  <div id="price-info">Total Price: Rs 0</div>
  <button type="submit">Confirm Rent</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const params = new URLSearchParams(window.location.search);
  const name  = params.get("name") || "Unknown Car";
  const image = params.get("image") || "";
  const pricePerDay = parseInt((params.get("price") || "0").replace(/[^\d]/g, ""), 10) || 0;

  const nameEl    = document.getElementById("selected-car-name");
  const imgEl     = document.getElementById("car-select-img");
  const totalEl   = document.getElementById("price-info");
  const daysInput = document.getElementById("days");
  const form      = document.getElementById("rentForm");
  const detailsEl = document.getElementById("car-details");

  if (nameEl) nameEl.textContent = name;
  if (imgEl && image) imgEl.src = image;

  function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

  function updateTotal() {
    let days = parseInt(daysInput.value, 10) || 1;
    days = clamp(days, 1, 5);
    daysInput.value = days;
    totalEl.textContent = "Total Price: Rs " + (pricePerDay * days);
  }

   updateTotal(); // initial calculation

  daysInput.addEventListener("input", updateTotal);

  // --- EmailJS Setup ---
form.addEventListener("submit", function(e) {
  e.preventDefault(); // prevent page reload

  updateTotal(); // recalc price

  // --- Calculate days and total ---
  const days = parseInt(daysInput.value, 10);
  const total = pricePerDay * days;

  // --- Confetti logic (optional) ---
  confetti({
    particleCount: 100,
    spread: 70,
    origin: { y: 0.6 }
  });

  // Optional alert for user confirmation
  alert("Rent confirmed! Check your email for details.");

  // --- EmailJS logic ---
  const formData = {
    car_name: name, // EmailJS template variable names
    total_price: total,
    full_name: document.getElementById("fullName").value,
    email: document.getElementById("email").value,
    mobile: document.getElementById("mobile").value,
    days: days
  };

  emailjs.send("service_2x0mdrf","template_iaiw9pq", formData, "yfonXBK6R72NxeF6m")
    .then(function(response) {
      console.log("Email sent successfully!", response.status, response.text);
      // Show confirmation overlay after email sent
      showConfirmation(`
        ðŸŽ‰ Rent Confirmed! <br>
        <strong>Car:</strong> ${name}<br>
        <strong>Days:</strong> ${days}<br>
        <strong>Total:</strong> Rs ${total}
      `);
    }, function(error) {
      console.error("Email failed:", error);
      alert("Failed to send email. Please try again.");
    });

  // Reset form fields if needed
  form.reset();
  updateTotal(); // reset total price display
});


   // --- Car Description ---
  const carData = {
  "Audi A8": { brand: "Audi", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Latest car/Audi A8.png", description: "Luxury sedan with cutting-edge tech and comfort.", pricePerDay: 3500 },
  "Lexus LS": { brand: "Lexus", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Latest car/Lexus LS.png", description: "Premium design and refined performance.", pricePerDay: 3200 },
  "Porsche Taycan": { brand: "Porsche", seats: 4, fuel: "Electric", transmission: "Automatic", image: "Latest car/Porsche Taycan.png", description: "Futuristic electric performance sedan.", pricePerDay: 4500 },
  "Toyota GR Supra": { brand: "Toyota", seats: 2, fuel: "Petrol", transmission: "Manual", image: "Latest car/Toyota Supra.png", description: "Sports coupe designed for thrilling rides.", pricePerDay: 3000 },
  "Hyundai Palisade": { brand: "Hyundai", seats: 7, fuel: "Diesel", transmission: "Automatic", image: "Latest car/Hyundai Palisade.png", description: "Family SUV with luxury interior.", pricePerDay: 2800 },
  "Honda Accord": { brand: "Honda", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Latest car/Honda Accord.png", description: "Reliable midsize car with good mileage.", pricePerDay: 2600 },
  "BMW 4 Series Convertible": { brand: "BMW", seats: 4, fuel: "Petrol", transmission: "Automatic", image: "Latest car/bmw 4 series convertible.png", description: "Stylish convertible designed for luxury and sporty drives.", pricePerDay: 4500 },
  "Suzuki Fronx GLX": { brand: "Suzuki", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Latest car/Suzuki Fronx GLX.png", description: "Compact and efficient crossover, perfect for city driving.", pricePerDay: 2300 },
  "Rolls-Royce Phantom": { brand: "Rolls-Royce", seats: 4, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/rolls-royce-phantom.png", description: "Ultimate luxury and exclusivity.", pricePerDay: 25000 },
  "Bentley Flying Spur": { brand: "Bentley", seats: 4, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Bentley.png", description: "Elegance meets performance.", pricePerDay: 20000 },
  "Mercedes-Benz S-Class Maybach": { brand: "Mercedes-Benz", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Mercedes.png", description: "Executive luxury with smart features.", pricePerDay: 18000 },
  "Porsche Panamera Turbo": { brand: "Porsche", seats: 4, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/porsche-panamera-SE.png", description: "Performance meets practicality.", pricePerDay: 16000 },
 "Lamborghini Urus": { brand: "Lamborghini", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Lamborghini-Urus.png", description: "High-performance luxury SUV with aggressive styling.", pricePerDay: 22000 },
  "Range Rover Autobiography": { brand: "Range Rover", seats: 5, fuel: "Diesel", transmission: "Automatic", image: "Luxury car/Range Rover.png", description: "Luxury off-roader with class.", pricePerDay: 14000 },
  "Aston Martin DB11": { brand: "Aston Martin", seats: 2, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Aston Martin DB11.png", description: "Bold design and performance.", pricePerDay: 23000 },
  "Maserati Quattroporte": { brand: "Maserati", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Maserati-Quattroporte.png", description: "Italian style luxury sedan.", pricePerDay: 17000 },
  "Toyota Vitz": { brand: "Toyota", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Family car/Toyota Vitz.png", description: "Compact, efficient, ideal for city.", pricePerDay: 1200 },
  "Suzuki Swift": { brand: "Suzuki", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Family car/Suzuki swift.png", description: "Fun and practical hatchback.", pricePerDay: 1300 },
  "Nissan March": { brand: "Nissan", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Family car/Nissan march.png", description: "Small and economic.", pricePerDay: 1200 },
  "Hyunda i10": { brand: "Hyundai", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Family car/Hyunda i10.png", description: "City hatchback with great value.", pricePerDay: 1300 },
  "Toyota Corolla": { brand: "Toyota", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Family car/Toyota Corolla.png", description: "Legendary reliability and comfort.", pricePerDay: 1800 },
  "Toyota Sienta": { brand: "Toyota", seats: 7, fuel: "Hybrid", transmission: "Automatic", image: "Family car/Toyota Sienta.png", description: "Compact MPV for family.", pricePerDay: 2000 },
  "Toyota Probox": { brand: "Toyota", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Family car/Toyota Probox.png", description: "Cargo or people carrier.", pricePerDay: 1600 },
  "Renault Triber": { brand: "Renault", seats: 7, fuel: "Petrol", transmission: "Manual", image: "Family car/Renault Triber.png", description: "Flexible MPV with 3-row seating.", pricePerDay: 1800 },
  "Renault Kwid": { brand: "Renault", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Family car/Renault kwid.png", description: "Affordable compact crossover.", pricePerDay: 1100 }
};

  const c = carData[name];
  if(c && detailsEl){
    detailsEl.innerHTML = `
      <div class="car-specs">
        <div class="spec-box"><i class="fas fa-chair"></i> <strong>Seats:</strong> ${c.seats}</div>
        <div class="spec-box"><i class="fas fa-gas-pump"></i> <strong>Fuel:</strong> ${c.fuel}</div>
        <div class="spec-box"><i class="fas fa-cogs"></i> <strong>Transmission:</strong> ${c.transmission}</div>
        <div class="spec-box"><i class="fas fa-info-circle"></i> ${c.description}</div>
        <div class="spec-box"><strong>Price/day:</strong> Rs ${c.pricePerDay}</div>
      </div>
    `;
  }
});
</script>

</body>
</html>
