<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rent Page</title>
  <link rel="stylesheet" href="Theme + Simple Design.css" />
  <a href="javascript:history.back()" class="back-button">⤺ Return Back</a>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="car-display.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  (function(){
    emailjs.init("yfonXBK6R72NxeF6m"); 
  })();
</script>
</head>
<body>
  <header class="main-header">
    <h1 class="animated-title">Rent Your Car</h1>
    <nav class="navbar">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="Booking Form + Price Calculator.html">Book</a></li>
        <li><a href="About Us.html">About</a></li>
        <li><a href="Contact Us.html">Contact</a></li>
        <li><a href="Location.html">Location</a></li>
      </ul>
    </nav>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Exo:wght@400;600&display=swap" rel="stylesheet">
  </header>

<h2 id="selected-car-name">Car Name</h2>
<div class="car-select">
  <img id="car-select-img" src="" alt="Selected Car" />
</div>

<!-- Car specs & description -->
<div class="car-details" id="car-details">
</div>

<section class="user-details"> 
  <h3>Enter Your Details</h3>
  <form id="rentForm">
    <input type="text" placeholder="Full Name" required />
    <input type="number" placeholder="Age" required />
    <input type="email" placeholder="Email" required />
    <input type="tel" placeholder="Mobile Number" required />
    <input type="text" placeholder="Card Number" required />
    <label for="days">Number of Days:</label>
    <input type="number" id="days" min="1" max="5" value="1" required />
    <div id="price-info">Total Price: Rs 0</div>
    <button type="submit">Confirm Rent</button>
  </form>
</section>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const params = new URLSearchParams(window.location.search);
  const name  = params.get("name") || "Unknown Car";
  const image = params.get("image") || "";
  const pricePerDay = parseInt((params.get("price") || "0").replace(/[^\d]/g, ""), 10) || 0;

  const nameEl    = document.getElementById("selected-car-name");
  const imgEl     = document.getElementById("car-select-img");
  const totalEl   = document.getElementById("price-info");
  const daysInput = document.getElementById("days");
  const form      = document.getElementById("rentForm");
  const detailsEl = document.getElementById("car-details");

  if (nameEl) nameEl.textContent = name;
  if (imgEl && image) imgEl.src = image;

  function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

  function updateTotal() {
    let days = parseInt(daysInput.value, 10) || 1;
    days = clamp(days, 1, 5);
    daysInput.value = days;
    totalEl.textContent = "Total Price: Rs " + (pricePerDay * days);
  }

  updateTotal(); // initial calculation

  daysInput.addEventListener("input", updateTotal);

  form.addEventListener("submit", function(e) {
    e.preventDefault();
    updateTotal();
showConfirmation(
  `Your rent is confirmed!<br>
   Car: ${name}<br>
   Days: ${daysInput.value}<br>
   Total: Rs ${pricePerDay * daysInput.value}`
);

emailjs.send("service_2x0mdrf","template_iaiw9pq",{
  name: document.querySelector("#fullName, #rentForm input[type=text]").value,
  car: name,
  days: daysInput.value,
  total: pricePerDay * daysInput.value,
  email: document.querySelector("#email").value,
  phone: document.querySelector("#mobile").value
})
.then(() => {
  console.log("✅ Email sent to customer");
})
.catch(err => console.error("❌ Email failed", err));

  });

   // --- Car Description ---
  const carData = {
  "Audi A8": { brand: "Audi", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Latest car/Audi A8.png", description: "Luxury sedan with cutting-edge tech and comfort.", pricePerDay: 3500 },
  "Lexus LS": { brand: "Lexus", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Latest car/Lexus LS.png", description: "Premium design and refined performance.", pricePerDay: 3200 },
  "Porsche Taycan": { brand: "Porsche", seats: 4, fuel: "Electric", transmission: "Automatic", image: "Latest car/Porsche Taycan.png", description: "Futuristic electric performance sedan.", pricePerDay: 4500 },
  "Toyota GR Supra": { brand: "Toyota", seats: 2, fuel: "Petrol", transmission: "Manual", image: "Latest car/Toyota Supra.png", description: "Sports coupe designed for thrilling rides.", pricePerDay: 3000 },
  "Hyundai Palisade": { brand: "Hyundai", seats: 7, fuel: "Diesel", transmission: "Automatic", image: "Latest car/Hyundai Palisade.png", description: "Family SUV with luxury interior.", pricePerDay: 2800 },
  "Honda Accord": { brand: "Honda", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Latest car/Honda Accord.png", description: "Reliable midsize car with good mileage.", pricePerDay: 2600 },
  "BMW 4 Series Convertible": { brand: "BMW", seats: 4, fuel: "Petrol", transmission: "Automatic", image: "Latest car/bmw 4 series convertible.png", description: "Stylish convertible designed for luxury and sporty drives.", pricePerDay: 4500 },
  "Suzuki Fronx GLX": { brand: "Suzuki", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Latest car/Suzuki Fronx GLX.png", description: "Compact and efficient crossover, perfect for city driving.", pricePerDay: 2300 },
  "Rolls-Royce Phantom": { brand: "Rolls-Royce", seats: 4, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/rolls-royce-phantom.png", description: "Ultimate luxury and exclusivity.", pricePerDay: 25000 },
  "Bentley Flying Spur": { brand: "Bentley", seats: 4, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Bentley.png", description: "Elegance meets performance.", pricePerDay: 20000 },
  "Mercedes-Benz S-Class Maybach": { brand: "Mercedes-Benz", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Mercedes.png", description: "Executive luxury with smart features.", pricePerDay: 18000 },
  "Porsche Panamera Turbo": { brand: "Porsche", seats: 4, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/porsche-panamera-SE.png", description: "Performance meets practicality.", pricePerDay: 16000 },
 "Lamborghini Urus": { brand: "Lamborghini", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Lamborghini-Urus.png", description: "High-performance luxury SUV with aggressive styling.", pricePerDay: 22000 },
  "Range Rover Autobiography": { brand: "Range Rover", seats: 5, fuel: "Diesel", transmission: "Automatic", image: "Luxury car/Range Rover.png", description: "Luxury off-roader with class.", pricePerDay: 14000 },
  "Aston Martin DB11": { brand: "Aston Martin", seats: 2, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Aston Martin DB11.png", description: "Bold design and performance.", pricePerDay: 23000 },
  "Maserati Quattroporte": { brand: "Maserati", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Luxury car/Maserati-Quattroporte.png", description: "Italian style luxury sedan.", pricePerDay: 17000 },
  "Toyota Vitz": { brand: "Toyota", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Family car/Toyota Vitz.png", description: "Compact, efficient, ideal for city.", pricePerDay: 1200 },
  "Suzuki Swift": { brand: "Suzuki", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Family car/Suzuki swift.png", description: "Fun and practical hatchback.", pricePerDay: 1300 },
  "Nissan March": { brand: "Nissan", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Family car/Nissan march.png", description: "Small and economic.", pricePerDay: 1200 },
  "Hyunda i10": { brand: "Hyundai", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Family car/Hyunda i10.png", description: "City hatchback with great value.", pricePerDay: 1300 },
  "Toyota Corolla": { brand: "Toyota", seats: 5, fuel: "Petrol", transmission: "Automatic", image: "Family car/Toyota Corolla.png", description: "Legendary reliability and comfort.", pricePerDay: 1800 },
  "Toyota Sienta": { brand: "Toyota", seats: 7, fuel: "Hybrid", transmission: "Automatic", image: "Family car/Toyota Sienta.png", description: "Compact MPV for family.", pricePerDay: 2000 },
  "Toyota Probox": { brand: "Toyota", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Family car/Toyota Probox.png", description: "Cargo or people carrier.", pricePerDay: 1600 },
  "Renault Triber": { brand: "Renault", seats: 7, fuel: "Petrol", transmission: "Manual", image: "Family car/Renault Triber.png", description: "Flexible MPV with 3-row seating.", pricePerDay: 1800 },
  "Renault Kwid": { brand: "Renault", seats: 5, fuel: "Petrol", transmission: "Manual", image: "Family car/Renault kwid.png", description: "Affordable compact crossover.", pricePerDay: 1100 }
};

  const c = carData[name];
  if(c && detailsEl){
    detailsEl.innerHTML = `
      <div class="car-specs">
        <div class="spec-box"><i class="fas fa-chair"></i> <strong>Seats:</strong> ${c.seats}</div>
        <div class="spec-box"><i class="fas fa-gas-pump"></i> <strong>Fuel:</strong> ${c.fuel}</div>
        <div class="spec-box"><i class="fas fa-cogs"></i> <strong>Transmission:</strong> ${c.transmission}</div>
        <div class="spec-box"><i class="fas fa-info-circle"></i> ${c.description}</div>
        <div class="spec-box"><strong>Price/day:</strong> Rs ${c.pricePerDay}</div>
      </div>
    `;
  }
});

function showConfirmation(message) {
  const overlay = document.getElementById("confirmation-overlay");
  const msg = document.getElementById("confirmation-message");
  msg.innerHTML = message;
  overlay.style.display = "flex";
  startConfetti();
}

// Confetti Effect
function startConfetti() {
  const canvas = document.getElementById("confetti-canvas");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const confetti = Array.from({length:150}, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height - canvas.height,
    r: Math.random() * 6 + 4,
    d: Math.random() * 0.5 + 0.5,
    color: `hsl(${Math.random()*360},100%,50%)`
  }));

  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    confetti.forEach(c => {
      ctx.beginPath();
      ctx.arc(c.x,c.y,c.r,0,Math.PI*2,true);
      ctx.fillStyle=c.color;
      ctx.fill();
    });
    update();
    requestAnimationFrame(draw);
  }
  function update() {
    confetti.forEach(c => {
      c.y+=c.d*4;
      if(c.y>canvas.height){
        c.y= -10;
        c.x=Math.random()*canvas.width;
      }
    });
  }
  draw();
}

</script>

<!-- Confirmation Overlay -->
<div id="confirmation-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; display:flex; justify-content:center; align-items:center; flex-direction:column; color:white; font-family:sans-serif; text-align:center;">
  <h1>🎉 Congratulations!</h1>
  <p id="confirmation-message">Your rent is confirmed.</p>
  <button onclick="document.getElementById('confirmation-overlay').style.display='none'" style="margin-top:20px; padding:10px 20px; border:none; background:#ff6600; color:white; border-radius:8px; cursor:pointer;">Close</button>
  <canvas id="confetti-canvas" style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none;"></canvas>
</div>


</body>
</html>
